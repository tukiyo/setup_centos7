---
- name: find {{ php_log }}
  stat: path={{ php_log }}
  register: result

- name: create {{ php_log }}
  file: path={{ php_log }} owner=apache group=apache mode=0644 state=touch
  when: not result.stat.exists

- name: install php
  yum: pkg={{ item }} state=installed enablerepo=remi,remi-php56
  with_items:
    - php56
    - php56-php-devel
    - php56-php-mysqlnd
    - php56-php-mbstring
    - php56-php-gd
    - php56-php-cli
    - php56-php-dbg
    - php56-php-pecl-xdebug
    - php56-php-pear
    - php56-php-pecl-mailparse
  notify:
    - restart httpd

- name: copy php_custom.ini
  copy: >
    src=php_custom.ini
    dest=/etc/php.d/php_custom.ini
    backup=yes
  notify:
    - restart httpd
